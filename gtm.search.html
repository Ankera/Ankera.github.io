<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GTM-Search</title>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-5NH8BXRL");
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <div>
      <div>搜索-New</div>
      <input type="text" id="input" />
      <button id="btn">搜索</button>
      <div>
        <div>搜索内容</div>
        <ul class="container" id="container"></ul>
      </div>
    </div>
  </body>
  <script>
    function getDynmaticKey() {
      let result = "";
      const charactersLength = 10;

      for (let i = 0; i < 50; i++) {
        const randomValue = Math.floor(
          (Date.now() * Math.random()) % charactersLength
        );
        result += String.fromCharCode(randomValue + 65);
      }

      return result.toLocaleLowerCase();
    }

    var input = document.getElementById("input");
    var btn = document.getElementById("btn");
    var container = document.getElementById("container");
    var params = new URL(window.location.href)
    var value = params.searchParams.get('searchValue')

    if(value) {
      container.innerHTML = '';
      for (let i = 0; i < 20; i++) {
        var li = document.createElement('li');
        li.textContent = value + '____' + getDynmaticKey();
        container.appendChild(li)
      }
    }


    btn.addEventListener("click", function () {
      if(!input.value){
        alert('请输入搜索内容')
        return;
      }
      window.location.href = '/gtm.search.html?searchValue=' + input.value;
    });
  </script>
</html>
